<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kh.semi.mappers.ProductMapper">
    <resultMap id="productResult" type="Product">
        <result column="PRODUCT_NO" property="productNo"/>
        <result column="CLIENT_ID" property="clientId"/>
        <result column="CATEGORY_NO" property="categoryNo"/>
        <result column="PRODUCT_NAME" property="productName"/>
        <result column="COLOR" property="color"/>
        <result column="PRODUCT_SIZE" property="productSize"/>
        <result column="REGISTRATION_DATE" property="registrationDate"/>
        <result column="STOCK_IN_PRICE" property="stockInPrice"/>
        <result column="STOCK_OUT_PRICE" property="stockOutPrice"/>
        <result column="IMAGE_URL" property="imageUrl"/>
        <result column="STATUS" property="status"/>
        <result column="CATEGORY_NAME" property="categoryName"/>
    </resultMap>
    <resultMap id="categoryResult" type="Category">
        <result column="CATEGORY_NO" property="categoryNo"/>
        <result column="CATEGORY_NAME" property="categoryName"/>
        <result column="STATUS" property="status"/>
    </resultMap>
    <resultMap id="clientResult" type="Client">
        <result column="CLIENT_ID" property="clientId"/>
        <result column="CLIENT_NAME" property="clientName"/>
        <result column="CLIENT_CEO" property="clientCEO"/>
        <result column="CLIENT_PHONE" property="clientPhone"/>
        <result column="CLIENT_ADDRESS" property="clientAddress"/>
    </resultMap>
    <select id="selectProductList" resultMap="productResult">
        SELECT P.PRODUCT_NO,
                P.PRODUCT_NAME,
                P.CATEGORY_NO,
                C.CATEGORY_NAME,
                P.COLOR,
                P.PRODUCT_SIZE,
                P.STOCK_IN_PRICE,
                P.STOCK_OUT_PRICE,
                P.STATUS
        FROM PRODUCT P
        JOIN CATEGORY C ON P.CATEGORY_NO = C.CATEGORY_NO
        WHERE P.STATUS = 'Y'
        ORDER BY P.PRODUCT_NO ASC
    </select>
    <select id="getCategoryList" resultMap="categoryResult">
        SELECT CATEGORY_NO,
            CATEGORY_NAME
        FROM CATEGORY
        ORDER BY CATEGORY_NO ASC
    </select>
    <select id="getClientList" resultMap="clientResult">
        SELECT CLIENT_ID,
                CLIENT_NAME
        FROM CLIENT
        ORDER BY CLIENT_NO ASC
    </select>
    <update id="updateProductPause">
        UPDATE PRODUCT
        SET STATUS = 'P'
        WHERE PRODUCT_NO IN
        <foreach item="productNo" collection="productNoList" open="(" separator="," close=")">
            #{productNo}
        </foreach>
    </update>
    <update id="updateProductDelete">
        UPDATE PRODUCT
        SET STATUS = 'D'
        WHERE PRODUCT_NO IN
        <foreach item="productNo" collection="productNoList" open="(" separator="," close=")">
            #{productNo}
        </foreach>
    </update>
</mapper>